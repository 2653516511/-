# æ‹–æ‹½é—®é¢˜

é¦–å…ˆï¼Œæ‹–æ‹½çš„å®ç°ï¼ˆåŒ…æ‹¬æ”¹å˜å¤§å°ã€ä½ç½®ï¼‰ï¼Œç§»åŠ¨ç«¯çš„æŒ‡ä»¤å’Œpcç«¯çš„æŒ‡ä»¤ä¸åŒï¼š

```jsx
// ç§»åŠ¨ç«¯
ontouchstart   ontouchmove   ontouchend

// pcç«¯
onmousedown    onmousemove   onmouseup
```

1. ä»‹ç»ç§»åŠ¨ç«¯çš„é«˜åº¦æ”¹å˜çš„å®ç°
    
    1ï¼‰åœ¨æ“ä½œä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦çŸ¥é“å‡ ä¸ªå±æ€§ï¼š
    
    ```jsx
    - clientHeight:   è®¾å¤‡çš„height    document.documentElement.clientHeight
    - pageY:   å½“å‰é¼ æ ‡çš„height        e.touches[0].pageY
    - targetNode.style.height:  è‹¥éœ€æ”¹å˜ç›®æ ‡ç»“ç‚¹çš„heightï¼Œéœ€è¦ç»™è¯¥å±æ€§èµ‹å€¼
    - targetNode.offsetHeight:  ç›®æ ‡ç»“ç‚¹çš„classå±æ€§ä¸­çš„heightï¼Œæ­¤heightå€¼åªå¯è¯»
    ```
    
    2ï¼‰é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦æ‹–æ‹½åº•éƒ¨çš„å¼¹å‡ºæ¡†ï¼Œæ”¹å˜å…¶é«˜åº¦ã€‚ 
    
    ğŸ””ç»™ç›®æ ‡ç»“ç‚¹åŠ æ‹–æ‹½äº‹ä»¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ontouchmoveï¼Œæ— é¡»ç”¨ontouchstart å’Œ ontouchend
    
    é¦–å…ˆï¼Œç»™ç›®æ ‡ç»“ç‚¹ç»‘å®šäº‹ä»¶ï¼š
    
    ```jsx
    <div v-show="isShowPopup" ref="WrapRef" class="questions-wrap">
        <div ref="ControlRef" class="questions-wrap-control">
            <div class="questions-wrap-control__icon" @touchmove.stop="changeHeight">
                
            </div>
        </div>
    		<!-- å¼¹å‡ºæ¡†ä¸­çš„å†…å®¹ -->
        <div ref="ContentRef" class="questions-wrap-content">
            
        </div>
    </div>
    ```
    
    ç„¶åï¼Œå†™changeHeightäº‹ä»¶ï¼š
    
    ```jsx
    changeHeight (e) {
    	const clientHeight = document.documentElement.clientHeight;
    	const maxHeight = clientHeight * 0.8
    	let height = clientHeight - e.touches[0].pageY
    
    	if(height >= maxHeight) height = maxHeight
    	this.$refs.WrapRef.style.height = `${height}px`
    
    	// æ”¹å˜é‡Œé¢å†…å®¹çš„height
    	const controlHeight = this.$refs.controlRef.offsetHeight;
    	const contentHeight = height - controlHeight - this.toolbarHeight     // this.toolbarHeightæ˜¯åº•éƒ¨å·¥å…·æ çš„height
    	this.$refs.ContentRef.style.height = `${contentHeight}px`
    }
    ```
    
2. ä»‹ç»pcç«¯çš„æ‹–æ‹½ä¾‹å­å®ç°
    
    å‚è€ƒï¼š[https://juejin.cn/post/6844903958633267208](https://juejin.cn/post/6844903958633267208)
    
3.